## 配置机器人和电报通道以与 OpenIPC 配合使用

为了使用 Telegram 作为免费的云平台，您需要进行一些简单的设置。首先我们将配置机器人，然后配置通道，最后我们将在相机的 OpenIPC 中进行适当的设置

### 创建并设置机器人

创建机器人的说明可在固件本身的 Telegram 服务设置页面上找到

- 在搜索您的 Telegram 时，输入"BotFather"。请小心，有大量的机器人与该机器人尽可能相似！真正的 BotFather 会有 Bot 验证标记。
- 按"/start"启动机器人
- 执行"/newbot"并按照机器人的说明进行操作。输入机器人标题和机器人名称。后者应上传到"bot"并以字母开头。
- 如果一切都正确完成，那么您将收到一条响应消息，其中包含格式为 _XXXXXXXXXXX:AaAa-BbBbBbBb-CcCcCcCcCcCcCcCcCcCcCcCc_ 的机器人令牌。该令牌可以完全控制您的机器人，因此您不应将其交给第三方或机器人，或将其输入到未经验证的地方！
- 通过输入命令"/mybots"，您可以选择自定义机器人的图片、描述和命令。目前还没有必要。
- 带有令牌的消息还包含指向您的新机器人的链接。按照它并确保机器人启动。

### 创建并设置频道

机器人向某个频道或某个群组发送消息的位置并没有太大区别。因此，下面描述的所有内容也适用于团体。

- 转到您的 Telegram 应用程序并单击"创建频道"（或"创建群组"）
- 输入频道名称
- 使频道**公开**（是的，这很重要，然后如果您愿意，可以将其设为私有）
- 在添加用户阶段，开始在搜索中输入您的机器人名称。添加机器人并授予其管理员权限。
- 现在您需要找出您的频道（或群组）的聊天ID。出于安全原因，此功能被隐藏。至少可以通过三种方式获取聊天 ID：
  - 在电报中写入特殊机器人（在不知道这些机器人的作者的情况下，我们不会这样做）
  - 对机器人使用 https 请求并检查 JSON 响应（这是可能的，但相当困难）
  - 使用 Telegram WEB（我们将使用此方法）
    - 前往 [web.telegram.org](web.telegram.org)
    - 连接您的电报帐户
    - 转到您的频道或群组并注意地址栏。它将在"#"字符后包含一个数字标识符。对于组和频道，它将以"-"符号开头
    - 在频道或群组标识符前添加"100"，保留"-"前缀，例如"-1001234567890"，其中"1234567890"是从网页版 Telegram 获取的数字聊天标识符

### 设置 OpenIPC

在固件菜单的 **服务** 部分中，选择 **发送到 Telegram**

- 在出现的插件中，激活 **启用发送到 Telegram** 设置
- 在下面输入您之前收到的机器人的**令牌**。
- 接下来，输入您的群组或频道的 **聊天 ID**。不要忘记添加"-100"
- 配置发送消息的其他参数

### 功能检查

- 确保预览部分显示相机图像。
- 访问摄像头控制台，例如使用 SSH
- 运行命令 `send2telegram.sh -v`
- 如果输入的内容正确，一条包含来自摄像机的图像的消息将被发送到频道或组
- 控制台中命令的输出对于学习和调试很有用

